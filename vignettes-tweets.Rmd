---
title: "Vignette Title"
author: "Vignette Author"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r include = FALSE}
# filepath <- file.path("tests", "testthat", "test-replicate_tetweet.R")
# file.exists(filepath)
# lines <- readLines(filepath)

```

Reading in an example data set created using `get_timeline()` from the
`rtweet` package on the pfficial Twitter accounts for all 30 NBA teams.
The data was scraped over a couple of days at the end of January and beginning of February of 2018.
The data has been "augmented" such that the team's slugname is appended
to the raw data frame.

```{r packages_and_import}
library("dplyr")
library("ggplot2")
library("tetext")

dir <- "tests"
filename_data_multi <- "tweets-search-nba-augmented.rds"
filepath_data_multi <-
  system.file(dir, filename_data_multi, package = "tetext", mustWork = TRUE)

data <- readRDS(file = filepath_data_multi)
data
```

A quick look at the example package data.

```{r eda_init}
data %>% count(name, sort = TRUE)
data %>% summarise(max = max(created_at), min = min(created_at))
```

Setting up for a subset of the data.

```{r tms_setup}
colors_tms <- c("blue", "red", "cadetblue", "purple", "black")
tms <- c("DAL", "HOU", "MEM", "NOP", "SAS")

data_filt <-
  data %>%
  filter(name %in% tms)
```

Note the creation of the `timestamp` and `time` columns,
as well as the trimming of many columns that have been subjectively determined
to be unnecessary for text analysis.

```{r}
data_multi <-
  data_filt %>% 
  clean_tweets_at(multi = "name")
data_multi
```

```{r}
data_multi_timefilter <-
  data_multi %>%
  compute_timefilter_multi_at(
    timebin = "timestamp",
    multi = "name"
  )

data_multi_trim <-
  data_multi %>%
  trim_bytime_at(
    timebin = "timestamp",
    start = data_multi_timefilter$date_start,
    end = data_multi_timefilter$date_end
  )
```

